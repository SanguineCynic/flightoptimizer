{% extends 'base.html' %} {% block main %}
<h1 class="main-heading-1">Emissions Predictor</h1>
<div class="container mt-4">
  <form
  method="POST"
  action="{{ url_for('fuelPrediction') }}"
    class="form-group"
  >
    {{ predform.csrf_token }}
    <div class="row">
      <div class="col-md-3">
        {{ predform.n_flights.label(class="form-label") }} {{
        predform.n_flights(class="form-control", placeholder="48") }}
      </div>
      <div class="col-md-3">
        {{ predform.airline_iata.label(class="form-label") }} {{
        predform.airline_iata(class="form-control", placeholder="MS") }}
      </div>
      <div class="col-md-3">
        {{ predform.acft_icao.label(class="form-label") }} {{
        predform.acft_icao(class="form-control", placeholder="A320") }}
      </div>
      <div class="col-md-3">
        {{ predform.seats.label(class="form-label") }} {{
        predform.seats(class="form-control", placeholder="7971") }}
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-md-3">
        {{ predform.icao_departure.label(class="form-label") }} {{
        predform.icao_departure(class="form-control", placeholder="EGLL") }}
      </div>
      <div class="col-md-3">
        {{ predform.icao_arrival.label(class="form-label") }} {{
        predform.icao_arrival(class="form-control", placeholder="KJFK") }}
      </div>
      <div class="col-md-3">
        {{ predform.fuel_burn_seymour.label(class="form-label") }} {{
        predform.fuel_burn_seymour(class="form-control", placeholder="2721.74") }}
      </div>
      <div class="col-md-3 d-flex align-items-end justify-content-center">
        {{ predform.submit(class="btn btn-primary") }}
      </div>
    </div>
  </form>

  <div class="card mx-auto" style="max-width: 600px">
    <div class="card-header">
      <h1 class="text-center">Fuel Burn Estimator</h1>
    </div>
    <div class="card-body">
      <form method="POST" action="">
        {{ calcform.hidden_tag() }}
        <div class="form-group">
          {{ calcform.icao_code.label(class="form-label") }} {{
          calcform.icao_code(class="form-control") }} {% if calcform.icao_code.errors %}
          <div class="text-danger">
            {% for error in calcform.icao_code.errors %}
            <small>{{ error }}</small><br />
            {% endfor %}
          </div>
          {% endif %}
        </div>
        <div class="form-group">
          {{ calcform.distance.label(class="form-label") }} {{
          calcform.distance(class="form-control") }} {% if calcform.distance.errors %}
          <div class="text-danger">
            {% for error in calcform.distance.errors %}
            <small>{{ error }}</small><br />
            {% endfor %}
          </div>
          {% endif %}
        </div>
        <br>
        {{ calcform.submit(class="btn btn-primary btn-block") }}
      </form>
  
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %}
      <div class="mt-4">
        {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
      {% endif %} {% endwith %}
    </div>
  </div>
  {% if prediction %}
  <!-- <hr class="divider" /> -->
  <div class="results mt-4">
    <h2 class="results-header">Prediction Results</h2>
    <p class="results-value">
      <span class="results-label">Total CO2 Emissions:</span> {{ prediction }}
      kg
    </p>
    <p class="results-value">
      <span class="results-label">Average Emissions per Flight:</span> {{
      average_emissions_per_flight }} kg
    </p>
  </div>
  {% endif %}

  <!-- Description about the dataset and how to validate the model -->
  <div class="dataset-info">
    <h3 >About our Predictor</h2>
    <p>
      This Predictor utilizes data derived from the AeroSCOPE project, an
      open-source initiative providing detailed information on global passenger
      air traffic using methodologies developed through collaborative research
      and publicly available data from various aviation authorities and
      organizations, such as ANAC, BTS, Eurocontrol, and the World Bank. For
      verifying the accuracy of our predicions, a
      preview of the test dataset is available below.

      <div class="google-sheet-preview">
        <img
          src="{{ url_for('static', filename='images/dataset-Excel.png') }}"
          alt="Google Sheet Preview"
        />
        <a
          href="https://docs.google.com/spreadsheets/d/19bd3XdN6OALCQp59dAq_NnSlxPmb7sVo6RXK8mPD9dQ/edit?usp=sharing"
          target="_blank"
          class="view-full-sheet"
          >View Full Sheet</a
        >
      </div>
    </p>
  </div>

{% endblock %} {% block css %}
<link rel="stylesheet" href="{{ url_for('static',filename='css/fuelPrediction.css') }}">
{% endblock %}

{% block js %}
<script>document.getElementById("predictionAnchor").classList.add("active")</script>
{% endblock %}